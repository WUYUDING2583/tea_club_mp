<!--pages/order/orderList/index.wxml-->
<import src="./template.wxml" />
<cu-custom bgColor="bg-gradual-blue" isBack="{{true}}">
  <view slot="backText">返回</view>
  <view slot="content">我的订单</view>
</cu-custom>

<view class="swiper-tab fixed" style="top:{{CustomBar}}px;">
  <view class="swiper-tab-list {{tab==0 ? 'on' : ''}}" data-current="0" bindtap="tab_click">全部</view>
  <view class="bre swiper-tab-list {{tab==1 ? 'on' : ''}}" data-current="1" bindtap="tab_click">待付款</view>
  <view class="swiper-tab-list {{tab==2 ? 'on' : ''}}" data-current="2" bindtap="tab_click">待发货</view>
  <view class="swiper-tab-list {{tab==3 ? 'on' : ''}}" data-current="3" bindtap="tab_click">待收货</view>
</view>

<swiper current="{{tab}}" class="swiper-box" duration="300" style="height:calc(100vh - {{CustomBar}}px - 50px)" bindchange="tab_slide">
  <swiper-item>
    <scroll-view scroll-y style="height:100%;" bindscrolltolower="scrollToBottom">
      <view wx:for="{{ordersAll}}" wx:key="unique">
        <template is="orderCard" data="{{...byOrdersAll[item]}}"></template>
      </view>
      <view class="text-grey text-center" wx:if="{{isBottom}}">没有啦.....</view>
    </scroll-view>
  </swiper-item>

  <swiper-item>
    <scroll-view scroll-y style="height:100%;" bindscrolltolower="scrollToBottom">
      <view wx:for="{{ordersUnpay}}" wx:key="unique">
        <template is="orderCard" data="{{...byOrdersUnpay[item]}}"></template>
      </view>
      <view class="text-grey text-center" wx:if="{{isBottom}}">没有啦.....</view>
    </scroll-view>
  </swiper-item>

  <swiper-item>
    <scroll-view scroll-y style="height:100%;" bindscrolltolower="scrollToBottom">
      <view wx:for="{{ordersPayed}}" wx:key="unique">
        <template is="orderCard" data="{{...byOrdersPayed[item],isBottom}}"></template>
      </view>
      <view class="text-grey text-center" wx:if="{{isBottom}}">没有啦.....</view>
    </scroll-view>
  </swiper-item>

  <swiper-item>
    <scroll-view scroll-y style="height:100%;" bindscrolltolower="scrollToBottom">
      <view wx:for="{{ordersShipped}}" wx:key="unique">
        <template is="orderCard" data="{{...byOrdersShipped[item]}}"></template>
      </view>
      <view class="text-grey text-center" wx:if="{{isBottom}}">没有啦.....</view>
    </scroll-view>
  </swiper-item>
</swiper>

<view class="cu-modal {{modalName=='cancelOrderModal'?'show':''}}">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class="content">取消订单</view>
      <view class="action" bindtap="hideModal">
        <text class="cuIcon-close text-red"></text>
      </view>
    </view>
    <view class="padding-xl">
      确认取消订单？
    </view>
    <view class="cu-bar bg-white justify-end">
      <view class="action flex justify-between"style="width:100%;">
        <button class="cu-btn line-green text-green" style="width:40%" bindtap="hideModal">取消</button>
        <button class="cu-btn bg-green margin-left" style="width:40%" bindtap="_cancelOrder">确定</button>
      </view>
    </view>
  </view>
</view>